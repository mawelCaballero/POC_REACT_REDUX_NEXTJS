{"component":"module.exports =\nwebpackJsonp([6],{\n\n/***/ 589:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(__resourceQuery) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(35);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(18);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(19);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(38);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(37);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = __webpack_require__(10);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _store = __webpack_require__(648);\n\nvar _nextReduxWrapper = __webpack_require__(642);\n\nvar _nextReduxWrapper2 = _interopRequireDefault(_nextReduxWrapper);\n\nvar _Page = __webpack_require__(643);\n\nvar _Page2 = _interopRequireDefault(_Page);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar dashboard = function (_React$Component) {\n  (0, _inherits3.default)(dashboard, _React$Component);\n\n  function dashboard() {\n    (0, _classCallCheck3.default)(this, dashboard);\n\n    return (0, _possibleConstructorReturn3.default)(this, (dashboard.__proto__ || (0, _getPrototypeOf2.default)(dashboard)).apply(this, arguments));\n  }\n\n  (0, _createClass3.default)(dashboard, [{\n    key: 'render',\n    value: function render() {\n      debugger;\n      return _react2.default.createElement(_Page2.default, { title: 'DashBoard' });\n    }\n  }], [{\n    key: 'getInitialProps',\n    value: function getInitialProps(_ref) {\n      var store = _ref.store;\n\n      store.dispatch((0, _store.startPage)('dashboard', 'quotes?_start=0&_start=0&_num=1000'));\n    }\n  }]);\n\n  return dashboard;\n}(_react2.default.Component);\n\nexports.default = (0, _nextReduxWrapper2.default)(_store.initStore)(dashboard);\n\n ;(function register() { /* react-hot-loader/webpack */ if (true) { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } if (typeof module.exports === 'function') { __REACT_HOT_LOADER__.register(module.exports, 'module.exports', \"/home/mawel/REACT/custom-server-express/pages/dashboard.js\"); return; } for (var key in module.exports) { if (!Object.prototype.hasOwnProperty.call(module.exports, key)) { continue; } var namedExport = void 0; try { namedExport = module.exports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"/home/mawel/REACT/custom-server-express/pages/dashboard.js\"); } } })();\n    (function (Component, route) {\n      if (false) return\n      if (false) return\n\n      var qs = __webpack_require__(82)\n      var params = qs.parse(__resourceQuery.slice(1))\n      if (params.entry == null) return\n\n      module.hot.accept()\n      Component.__route = route\n\n      if (module.hot.status() === 'idle') return\n\n      var components = next.router.components\n      for (var r in components) {\n        if (!components.hasOwnProperty(r)) continue\n\n        if (components[r].Component.__route === route) {\n          next.router.update(r, Component)\n        }\n      }\n    })(module.exports.default || module.exports, \"/dashboard\")\n  \n/* WEBPACK VAR INJECTION */}.call(exports, \"?entry\"))\n\n/***/ }),\n\n/***/ 590:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar map = {\n\t\"./dashboard.json\": 621\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 590;\n\n/***/ }),\n\n/***/ 621:\n/***/ (function(module, exports) {\n\nmodule.exports = {\n\t\"metamodel\": {\n\t\t\"name\": \"Dashboard Quote List\",\n\t\t\"pagination\": true,\n\t\t\"searching\": true,\n\t\t\"summary\": true,\n\t\t\"sections\": [\n\t\t\t{\n\t\t\t\t\"title\": \"Search quote list form\",\n\t\t\t\t\"properties\": [\n\t\t\t\t\t{\n\t\t\t\t\t\t\"id\": \"quote-number\",\n\t\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\t\"label\": \"_QUOTE_NUMBER\",\n\t\t\t\t\t\t\"uiInput\": true,\n\t\t\t\t\t\t\"class\": \"box box-rds-color box-marginTB everestFieldBox\",\n\t\t\t\t\t\t\"action\": {\n\t\t\t\t\t\t\t\"actionType\": \"search\",\n\t\t\t\t\t\t\t\"resource\": \"quotes\",\n\t\t\t\t\t\t\t\"criteria_id\": \"quote-identifier\"\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"id\": \"quote-list\",\n\t\t\t\t\t\t\"label\": \"_QUOTE_LIST\",\n\t\t\t\t\t\t\"class\": \"box box-rds-color box-marginTB everestFieldBox\",\n\t\t\t\t\t\t\"type\": \"table\",\n\t\t\t\t\t\t\"columns\": [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\"id\": \"quote-product-id\",\n\t\t\t\t\t\t\t\t\"label_header\": \"_PRODUCT_TYPE\",\n\t\t\t\t\t\t\t\t\"type\": \"icon\",\n\t\t\t\t\t\t\t\t\"width\": \"5%\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\"id\": \"quote-identifier\",\n\t\t\t\t\t\t\t\t\"label_header\": \"_NUMBER\",\n\t\t\t\t\t\t\t\t\"type\": \"label\",\n\t\t\t\t\t\t\t\t\"align\": \"left\",\n\t\t\t\t\t\t\t\t\"width\": \"10%\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\"id\": \"quote-owner-name\",\n\t\t\t\t\t\t\t\t\"label_header\": \"_NAME\",\n\t\t\t\t\t\t\t\t\"type\": \"label\",\n\t\t\t\t\t\t\t\t\"align\": \"left\",\n\t\t\t\t\t\t\t\t\"width\": \"10%\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\"id\": \"quote-start-date\",\n\t\t\t\t\t\t\t\t\"label_header\": \"_Effective_Date\",\n\t\t\t\t\t\t\t\t\"type\": \"label\",\n\t\t\t\t\t\t\t\t\"format\": \"dd/MM/yyyy\",\n\t\t\t\t\t\t\t\t\"align\": \"left\",\n\t\t\t\t\t\t\t\t\"width\": \"10%\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\"id\": \"quote-distributor-id\",\n\t\t\t\t\t\t\t\t\"label_header\": \"_DISTRIBUTOR_ID\",\n\t\t\t\t\t\t\t\t\"type\": \"label\",\n\t\t\t\t\t\t\t\t\"align\": \"left\",\n\t\t\t\t\t\t\t\t\"width\": \"10%\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\"id\": \"quote_risk:display-id\",\n\t\t\t\t\t\t\t\t\"label_header\": \"_RISK_DATA\",\n\t\t\t\t\t\t\t\t\"type\": \"label\",\n\t\t\t\t\t\t\t\t\"align\": \"left\",\n\t\t\t\t\t\t\t\t\"width\": \"15%\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\"id\": \"actions\",\n\t\t\t\t\t\t\t\t\"type\": \"actions\",\n\t\t\t\t\t\t\t\t\"align\": \"left\",\n\t\t\t\t\t\t\t\t\"width\": \"10%\",\n\t\t\t\t\t\t\t\t\"options\": [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\"value\": \"edit\",\n\t\t\t\t\t\t\t\t\t\t\"icon\": \"fa flaticon-edit\",\n\t\t\t\t\t\t\t\t\t\t\"title\": \"_EDIT\",\n\t\t\t\t\t\t\t\t\t\t\"method\": \"dashboardToQuote\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\"value\": \"remove\",\n\t\t\t\t\t\t\t\t\t\t\"icon\": \"fa fa-trash-o\",\n\t\t\t\t\t\t\t\t\t\t\"title\": \"_DELETE\",\n\t\t\t\t\t\t\t\t\t\t\"method\": \"deleteQuote\"\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t}\n};\n\n/***/ }),\n\n/***/ 643:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(35);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(18);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(19);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(38);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(37);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _reactRedux = __webpack_require__(561);\n\nvar _react = __webpack_require__(10);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Section = __webpack_require__(645);\n\nvar _Section2 = _interopRequireDefault(_Section);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Page = function (_Component) {\n    (0, _inherits3.default)(Page, _Component);\n\n    function Page() {\n        (0, _classCallCheck3.default)(this, Page);\n\n        return (0, _possibleConstructorReturn3.default)(this, (Page.__proto__ || (0, _getPrototypeOf2.default)(Page)).apply(this, arguments));\n    }\n\n    (0, _createClass3.default)(Page, [{\n        key: 'render',\n        value: function render() {\n            var _props = this.props,\n                title = _props.title,\n                viewdata = _props.viewdata;\n\n            var renderTitle = function renderTitle() {\n                debugger;\n                if (viewdata !== null && viewdata.title !== null && typeof viewdata.title !== 'undefined') {\n                    return _react2.default.createElement('div', null, ' ', viewdata.title, ' ');\n                } else {\n                    return _react2.default.createElement('div', null, ' Loading ');\n                }\n            };\n\n            var renderSections = function renderSections() {\n                if (viewdata && viewdata.sections) {\n                    debugger;\n                    return viewdata.sections.map(function (section) {\n                        return _react2.default.createElement(_Section2.default, { key: section.title, title: section.title, properties: section.properties });\n                    });\n                } else {\n                    return _react2.default.createElement('div', null, ' ...be pacience ');\n                }\n            };\n\n            return _react2.default.createElement('div', { className: 'page-title' }, _react2.default.createElement('h1', null, ' ', renderTitle(), ' '), renderSections());\n        }\n    }]);\n\n    return Page;\n}(_react.Component);\n\nexports.default = (0, _reactRedux.connect)(function (state) {\n    return state;\n})(Page);\n\n ;(function register() { /* react-hot-loader/webpack */ if (true) { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } if (typeof module.exports === 'function') { __REACT_HOT_LOADER__.register(module.exports, 'module.exports', \"/home/mawel/REACT/custom-server-express/components/Page.js\"); return; } for (var key in module.exports) { if (!Object.prototype.hasOwnProperty.call(module.exports, key)) { continue; } var namedExport = void 0; try { namedExport = module.exports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"/home/mawel/REACT/custom-server-express/components/Page.js\"); } } })();\n\n/***/ }),\n\n/***/ 644:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(35);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(18);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(19);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(38);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(37);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _reactRedux = __webpack_require__(561);\n\nvar _react = __webpack_require__(10);\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Property = function (_Component) {\n    (0, _inherits3.default)(Property, _Component);\n\n    function Property() {\n        (0, _classCallCheck3.default)(this, Property);\n\n        return (0, _possibleConstructorReturn3.default)(this, (Property.__proto__ || (0, _getPrototypeOf2.default)(Property)).apply(this, arguments));\n    }\n\n    (0, _createClass3.default)(Property, [{\n        key: 'render',\n        value: function render() {\n            var _this2 = this;\n\n            var _props = this.props,\n                id = _props.id,\n                type = _props.type,\n                label = _props.label,\n                action = _props.action,\n                value = _props.value,\n                href = _props.href;\n\n            var renderInputActionSearch = function renderInputActionSearch() {\n                if (action && action.actionType === 'search') {\n                    return _react2.default.createElement('input', { type: 'button', className: 'button', value: 'Search' });\n                }\n                return null;\n            };\n\n            return _react2.default.createElement('div', { className: 'row' }, _react2.default.createElement('div', { className: 'small-2 large-4 columns' }, _react2.default.createElement('label', { className: 'label', htmlFor: id }, label)), _react2.default.createElement('div', { className: 'small-6 large-6 columns' }, _react2.default.createElement('input', { type: type, id: id, name: id, ref: function ref(input) {\n                    _this2.textInput = input;\n                }, value: value })), _react2.default.createElement('div', { className: 'small-2 large-2 columns' }, renderInputActionSearch()));\n        }\n    }]);\n\n    return Property;\n}(_react.Component);\n\nexports.default = (0, _reactRedux.connect)(function (state) {\n    return state;\n})(Property);\n\n ;(function register() { /* react-hot-loader/webpack */ if (true) { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } if (typeof module.exports === 'function') { __REACT_HOT_LOADER__.register(module.exports, 'module.exports', \"/home/mawel/REACT/custom-server-express/components/Property.js\"); return; } for (var key in module.exports) { if (!Object.prototype.hasOwnProperty.call(module.exports, key)) { continue; } var namedExport = void 0; try { namedExport = module.exports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"/home/mawel/REACT/custom-server-express/components/Property.js\"); } } })();\n\n/***/ }),\n\n/***/ 645:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(35);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(18);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(19);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(38);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(37);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _reactRedux = __webpack_require__(561);\n\nvar _react = __webpack_require__(10);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Property = __webpack_require__(644);\n\nvar _Property2 = _interopRequireDefault(_Property);\n\nvar _TableResult = __webpack_require__(646);\n\nvar _TableResult2 = _interopRequireDefault(_TableResult);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Section = function (_Component) {\n    (0, _inherits3.default)(Section, _Component);\n\n    function Section() {\n        (0, _classCallCheck3.default)(this, Section);\n\n        return (0, _possibleConstructorReturn3.default)(this, (Section.__proto__ || (0, _getPrototypeOf2.default)(Section)).apply(this, arguments));\n    }\n\n    (0, _createClass3.default)(Section, [{\n        key: 'render',\n        value: function render() {\n            var _props = this.props,\n                title = _props.title,\n                properties = _props.properties;\n\n            var renderProperties = function renderProperties() {\n\n                if (properties) {\n                    return properties.map(function (property) {\n                        debugger;\n                        switch (property.type) {\n                            case 'text':\n                                return _react2.default.createElement(_Property2.default, { key: property.id,\n                                    id: property.id,\n                                    type: property.type,\n                                    label: property.label,\n                                    action: property.action,\n                                    value: property.value,\n                                    href: property.href\n                                });\n                            case 'table':\n                                return _react2.default.createElement(_TableResult2.default, { key: property.id,\n                                    id: property.id,\n                                    type: property.type,\n                                    label: property.label,\n                                    cols: property.cols,\n                                    rows: property.rows\n                                });\n                            default:\n                                return _react2.default.createElement('div', null, ' Print a default property ');\n                                break;\n                        };\n                    });\n                } else {\n                    return _react2.default.createElement('div', null, ' ');\n                }\n            };\n\n            var _title = '';\n            if (title) {\n                _title = title;\n            } else {\n                _title = 'Default title';\n            }\n\n            return _react2.default.createElement('div', null, _react2.default.createElement('h2', null, _title), renderProperties());\n        }\n    }]);\n\n    return Section;\n}(_react.Component);\n\nexports.default = Section;\n\n ;(function register() { /* react-hot-loader/webpack */ if (true) { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } if (typeof module.exports === 'function') { __REACT_HOT_LOADER__.register(module.exports, 'module.exports', \"/home/mawel/REACT/custom-server-express/components/Section.js\"); return; } for (var key in module.exports) { if (!Object.prototype.hasOwnProperty.call(module.exports, key)) { continue; } var namedExport = void 0; try { namedExport = module.exports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"/home/mawel/REACT/custom-server-express/components/Section.js\"); } } })();\n\n/***/ }),\n\n/***/ 646:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(35);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(18);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(19);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(38);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(37);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _reactRedux = __webpack_require__(561);\n\nvar _react = __webpack_require__(10);\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar TableResult = function (_Component) {\n    (0, _inherits3.default)(TableResult, _Component);\n\n    function TableResult() {\n        (0, _classCallCheck3.default)(this, TableResult);\n\n        return (0, _possibleConstructorReturn3.default)(this, (TableResult.__proto__ || (0, _getPrototypeOf2.default)(TableResult)).apply(this, arguments));\n    }\n\n    (0, _createClass3.default)(TableResult, [{\n        key: 'render',\n        value: function render() {\n            var _props = this.props,\n                id = _props.id,\n                type = _props.type,\n                label = _props.label,\n                cols = _props.cols,\n                rows = _props.rows;\n\n            var renderCols = cols.map(function (currentcol) {\n                return _react2.default.createElement('th', null, currentcol);\n            });\n\n            var count = 0;\n\n            var renderRows = rows.map(function (currentRow) {\n\n                var container = [];\n                var row = [];\n                for (var currentColumn in cols) {\n                    if (currentColumn == '6') {\n                        row.push(_react2.default.createElement('td', null, count));\n                    } else {\n                        row.push(_react2.default.createElement('td', null, currentRow[cols[currentColumn]]));\n                    }\n                }\n                container.push(_react2.default.createElement('tr', null, row));\n\n                count++;\n\n                return container;\n            });\n\n            return _react2.default.createElement('table', null, _react2.default.createElement('thead', null, _react2.default.createElement('tr', null, renderCols)), _react2.default.createElement('tbody', null, renderRows));\n        }\n    }]);\n\n    return TableResult;\n}(_react.Component);\n\nexports.default = TableResult;\n\n ;(function register() { /* react-hot-loader/webpack */ if (true) { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } if (typeof module.exports === 'function') { __REACT_HOT_LOADER__.register(module.exports, 'module.exports', \"/home/mawel/REACT/custom-server-express/components/TableResult.js\"); return; } for (var key in module.exports) { if (!Object.prototype.hasOwnProperty.call(module.exports, key)) { continue; } var namedExport = void 0; try { namedExport = module.exports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"/home/mawel/REACT/custom-server-express/components/TableResult.js\"); } } })();\n\n/***/ }),\n\n/***/ 647:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar ENDPOINT_URL = exports.ENDPOINT_URL = 'http://integral-everest-724722050.ap-southeast-2.elb.amazonaws.com/DEV1-TEST/runtime-web/omni/service/';\n\n ;(function register() { /* react-hot-loader/webpack */ if (true) { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } if (typeof module.exports === 'function') { __REACT_HOT_LOADER__.register(module.exports, 'module.exports', \"/home/mawel/REACT/custom-server-express/constants/constants.js\"); return; } for (var key in module.exports) { if (!Object.prototype.hasOwnProperty.call(module.exports, key)) { continue; } var namedExport = void 0; try { namedExport = module.exports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"/home/mawel/REACT/custom-server-express/constants/constants.js\"); } } })();\n\n/***/ }),\n\n/***/ 648:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.initStore = exports.reducer = undefined;\nexports.startPage = startPage;\nexports.initPage = initPage;\nexports.loadPropertiesFromResource = loadPropertiesFromResource;\nexports.transformDataView = transformDataView;\n\nvar _extends2 = __webpack_require__(92);\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _redux = __webpack_require__(583);\n\nvar _remoteReduxDevtools = __webpack_require__(668);\n\nvar _resourceFactory = __webpack_require__(649);\n\nvar _resourceFactory2 = _interopRequireDefault(_resourceFactory);\n\nvar _reduxThunk = __webpack_require__(661);\n\nvar _reduxThunk2 = _interopRequireDefault(_reduxThunk);\n\nvar _transform = __webpack_require__(650);\n\nvar _transform2 = _interopRequireDefault(_transform);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar initialState = {\n  metadata: null,\n  viewdata: null,\n  properties: null,\n  loading: false,\n  screenId: '',\n  errorMessage: ''\n};\n\nvar reducer = exports.reducer = function reducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments[1];\n\n  switch (action.type) {\n    case 'INIT':\n      {\n        console.log('access to init and action to load metamodel if exist');\n        var screenJsonModel = __webpack_require__(590)(\"./\" + action.screenId + '.json');\n        return (0, _extends3.default)({}, state, { screenId: 'dashboard', loading: true, metadata: screenJsonModel });\n      }\n    case 'LOAD_PROPERTIES_FROM_RESOURCE':\n      {\n        console.log('Loading properties from API');\n        return (0, _extends3.default)({}, state, { properties: action.response });\n      }\n    case 'TRANSFORM_DATA_VIEW':\n      {\n        console.log('Transforming data');\n        var transformedData = void 0;\n        if (state.metadata && state.properties) {\n          return (0, _extends3.default)({}, state, { viewdata: (0, _transform2.default)(state.metadata, state.properties) });\n        }\n        return (0, _extends3.default)({}, state, { viewdata: transformedData });\n      }\n    default:\n      return state;\n  }\n};\n\nvar composeEnhancers = (0, _remoteReduxDevtools.composeWithDevTools)({ realtime: true, port: 8080 });\n\nvar initStore = exports.initStore = function initStore(initialState) {\n  return (0, _redux.createStore)(reducer, initialState, composeEnhancers((0, _redux.applyMiddleware)(_reduxThunk2.default)));\n};\n\nfunction startPage(screenId, resourceName, url) {\n  return function (dispatch) {\n    console.log('Starting page');\n    dispatch(initPage(screenId));\n    if (url) {\n      debugger;\n      _resourceFactory2.default.getResponseFromURL(url).then(function (res) {\n        dispatch(loadPropertiesFromResource(res));\n        dispatch(transformDataView());\n      });\n    } else {\n      debugger;\n      _resourceFactory2.default.getResponse(resourceName, {}).then(function (res) {\n        dispatch(loadPropertiesFromResource(res));\n        dispatch(transformDataView(url));\n      });\n    }\n  };\n}\n\n/**\n* Action for init state\n*\n**/\nfunction initPage(screenId) {\n  return { type: 'INIT', screenId: screenId };\n}\n\n/**\n * Sets the authentication state of the application\n * @param {boolean} newState True means a user is logged in, false means no user is logged in\n */\nfunction loadPropertiesFromResource(response) {\n  return { type: 'LOAD_PROPERTIES_FROM_RESOURCE', response: response };\n}\n\nfunction transformDataView(url) {\n  return { type: 'TRANSFORM_DATA_VIEW', url: url };\n}\n\n ;(function register() { /* react-hot-loader/webpack */ if (true) { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } if (typeof module.exports === 'function') { __REACT_HOT_LOADER__.register(module.exports, 'module.exports', \"/home/mawel/REACT/custom-server-express/store.js\"); return; } for (var key in module.exports) { if (!Object.prototype.hasOwnProperty.call(module.exports, key)) { continue; } var namedExport = void 0; try { namedExport = module.exports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"/home/mawel/REACT/custom-server-express/store.js\"); } } })();\n\n/***/ }),\n\n/***/ 649:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _axios = __webpack_require__(591);\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nvar _constants = __webpack_require__(647);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nmodule.exports = {\n\n  getResponse: function getResponse(resource, criteria) {\n    if (typeof criteria !== 'undefined' && typeof criteria.param !== 'undefined') {\n      var encodedLocation = encodeURIComponent(criteria.param.value);\n    }\n\n    var requestUrl = typeof criteria !== 'undefined' && typeof criteria.param !== 'undefined' && criteria.param.value.length > 0 ? '' + _constants.ENDPOINT_URL + resource + '?' + criteria.param.key + '=' + encodedLocation : '' + _constants.ENDPOINT_URL + resource;\n    return _axios2.default.get(requestUrl).then(function (res) {\n      if (res.data._links && res.data._links.item) {\n        return res.data._links.item;\n      }\n    }, function (res) {\n      throw new Error('Error get operation to ' + (_constants.ENDPOINT_URL + '/' + resource));\n    });\n  },\n\n  getResponseFromURL: function getResponseFromURL(url, payload) {\n\n    return _axios2.default.get(url).then(function (res) {\n      if (res.data) {\n        return res.data;\n      }\n    }, function (res) {\n      throw new Error('Error get operation to ' + url);\n    });\n  },\n\n  patch: function patch(url, payload) {\n\n    return _axios2.default.patch(url, payload).then(function (res) {\n      if (res.data) {\n        return res.data;\n      }\n    }, function (res) {\n      throw new Error('Error get operation to ' + url);\n    });\n  }\n\n};\n\n ;(function register() { /* react-hot-loader/webpack */ if (true) { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } if (typeof module.exports === 'function') { __REACT_HOT_LOADER__.register(module.exports, 'module.exports', \"/home/mawel/REACT/custom-server-express/utils/resourceFactory.js\"); return; } for (var key in module.exports) { if (!Object.prototype.hasOwnProperty.call(module.exports, key)) { continue; } var namedExport = void 0; try { namedExport = module.exports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"/home/mawel/REACT/custom-server-express/utils/resourceFactory.js\"); } } })();\n\n/***/ }),\n\n/***/ 650:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = function (metadata, response) {\n\n    var viewData = {};\n\n    if (metadata && response) {\n\n        var title = '';\n        var sections = [];\n\n        if (metadata.metamodel) {\n            title = metadata.metamodel.name;\n            for (var i = 0; i < metadata.metamodel.sections.length; i++) {\n\n                var currentSection = metadata.metamodel.sections[i];\n\n                var properties = [];\n                for (var j = 0; j < currentSection.properties.length; j++) {\n                    var currentProperty = currentSection.properties[j];\n\n                    switch (currentProperty.type) {\n                        case 'text':\n                            properties.push({\n                                id: currentProperty.id,\n                                type: currentProperty.type,\n                                label: currentProperty.label,\n                                class: currentProperty.class,\n                                value: currentProperty.uiInput ? currentProperty.initValue : getPropertyValue(currentProperty.id, response),\n                                action: currentProperty.action ? currentProperty.action : null,\n                                href: response._links ? response._links.self.href : ''\n                            });\n\n                            break;\n                        case 'table':\n                            properties.push({\n                                id: currentProperty.id,\n                                type: currentProperty.type,\n                                label: currentProperty.label,\n                                class: currentProperty.class,\n                                rows: getRowsValue(currentProperty.columns, response),\n                                cols: getColsValue(currentProperty.columns)\n                            });\n\n                            break;\n                        default:\n                            break;\n                    }\n                }\n\n                sections[i] = {\n                    title: currentSection.title,\n                    properties: properties\n                };\n            }\n        }\n\n        viewData = {\n            title: title,\n            sections: sections\n        };\n    }\n    return viewData;\n};\n\nvar getPropertyValue = function getPropertyValue(id, properties) {\n    for (var currentId in properties) {\n        if (id === currentId) {\n            return properties[id];\n        }\n    }\n    return null;\n};\n\nvar getPropertyLink = function getPropertyLink(id, properties) {\n    debugger;\n    for (var currentId in properties) {\n        if (id === currentId) {\n            return properties[id]._links.self.href;\n        }\n    }\n    return null;\n};\n\nvar getRowsValue = function getRowsValue(columns, properties) {\n    var rows = [];\n\n    properties = Array.isArray(properties) ? properties : [properties];\n\n    for (var i = 0; i < properties.length; i++) {\n        var items = {};\n        items.href = properties[i].href;\n        for (var currentColumn in columns) {\n\n            if (items !== null && typeof items[columns[currentColumn].id] === 'undefined') {\n                items[columns[currentColumn].id] = properties[i].summary[columns[currentColumn].id] || '';\n            }\n        }\n        rows.push(items);\n    }\n\n    return rows;\n};\n\nvar getColsValue = function getColsValue(columns) {\n    var cols = [];\n    for (var currentColumn in columns) {\n        cols.push(columns[currentColumn].id);\n    }\n    return cols;\n};\n\n ;(function register() { /* react-hot-loader/webpack */ if (true) { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } if (typeof module.exports === 'function') { __REACT_HOT_LOADER__.register(module.exports, 'module.exports', \"/home/mawel/REACT/custom-server-express/utils/transform.js\"); return; } for (var key in module.exports) { if (!Object.prototype.hasOwnProperty.call(module.exports, key)) { continue; } var namedExport = void 0; try { namedExport = module.exports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"/home/mawel/REACT/custom-server-express/utils/transform.js\"); } } })();\n\n/***/ }),\n\n/***/ 694:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(589);\n\n\n/***/ })\n\n},[694]);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9wYWdlcy9kYXNoYm9hcmQuanM/MzMwY2QyNCIsIndlYnBhY2s6Ly8vLi9tZXRhbW9kZWwgXlxcLlxcLy4qXFwuanNvbiQ/NjA4NzYyMSIsIndlYnBhY2s6Ly8vLi9tZXRhbW9kZWwvZGFzaGJvYXJkLmpzb24/NjA4NzYyMSIsIndlYnBhY2s6Ly8vLi9jb21wb25lbnRzL1BhZ2UuanM/NjA4NzYyMSIsIndlYnBhY2s6Ly8vLi9jb21wb25lbnRzL1Byb3BlcnR5LmpzPzYwODc2MjEiLCJ3ZWJwYWNrOi8vLy4vY29tcG9uZW50cy9TZWN0aW9uLmpzPzYwODc2MjEiLCJ3ZWJwYWNrOi8vLy4vY29tcG9uZW50cy9UYWJsZVJlc3VsdC5qcz82MDg3NjIxIiwid2VicGFjazovLy8uL2NvbnN0YW50cy9jb25zdGFudHMuanM/NjA4NzYyMSIsIndlYnBhY2s6Ly8vLi9zdG9yZS5qcz82MDg3NjIxIiwid2VicGFjazovLy8uL3V0aWxzL3Jlc291cmNlRmFjdG9yeS5qcz82MDg3NjIxIiwid2VicGFjazovLy8uL3V0aWxzL3RyYW5zZm9ybS5qcz82MDg3NjIxIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFPOzs7O0FBQ2E7O0FBQ2I7Ozs7QUFDQTs7Ozs7O0lBRUQ7Ozs7Ozs7Ozs7OzZCQU9GO0FBQ0E7YUFDRSxnQkFBQyxnQ0FBTSxPQUVWOzs7OzBDQVRrQztVQUFBLGFBQy9COztZQUFNLFNBQVMsc0JBQVUsYUFDMUI7Ozs7O0VBSm1CLGdCQWN4Qjs7a0JBQXlCLGtEQUFXLFc7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ25CcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCOzs7Ozs7O0FDakJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QUFTLFNBQ3hCO1FBQUksT0FDSjtTQUFLLElBQUksaUJBQWlCLFNBQ3RCO2FBQUssS0FBSyxRQUFRLGVBQ3JCO0FBQ0Q7V0FDSDtBQU5ELEUiLCJmaWxlIjoiYnVuZGxlcy9wYWdlcy9kYXNoYm9hcmQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBpbml0U3RvcmUsIHN0YXJ0UGFnZSB9IGZyb20gJy4uL3N0b3JlJ1xuaW1wb3J0IHdpdGhSZWR1eCBmcm9tICduZXh0LXJlZHV4LXdyYXBwZXInXG5pbXBvcnQgUGFnZSBmcm9tICcuLi9jb21wb25lbnRzL1BhZ2UnXG5cbmNsYXNzIGRhc2hib2FyZCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG5cbiAgc3RhdGljIGdldEluaXRpYWxQcm9wcyAoeyBzdG9yZSB9KSB7XG4gICAgICBzdG9yZS5kaXNwYXRjaChzdGFydFBhZ2UoJ2Rhc2hib2FyZCcsICdxdW90ZXM/X3N0YXJ0PTAmX3N0YXJ0PTAmX251bT0xMDAwJykpO1xuICAgIH1cblxuICByZW5kZXIgKCkge1xuICAgIGRlYnVnZ2VyO1xuICAgIHJldHVybiAoXG4gICAgICA8UGFnZSAgdGl0bGU9XCJEYXNoQm9hcmRcIi8+XG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHdpdGhSZWR1eChpbml0U3RvcmUpKGRhc2hib2FyZClcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3BhZ2VzL2Rhc2hib2FyZC5qcz9lbnRyeSIsInZhciBtYXAgPSB7XG5cdFwiLi9kYXNoYm9hcmQuanNvblwiOiA2MjFcbn07XG5mdW5jdGlvbiB3ZWJwYWNrQ29udGV4dChyZXEpIHtcblx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18od2VicGFja0NvbnRleHRSZXNvbHZlKHJlcSkpO1xufTtcbmZ1bmN0aW9uIHdlYnBhY2tDb250ZXh0UmVzb2x2ZShyZXEpIHtcblx0dmFyIGlkID0gbWFwW3JlcV07XG5cdGlmKCEoaWQgKyAxKSkgLy8gY2hlY2sgZm9yIG51bWJlciBvciBzdHJpbmdcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiICsgcmVxICsgXCInLlwiKTtcblx0cmV0dXJuIGlkO1xufTtcbndlYnBhY2tDb250ZXh0LmtleXMgPSBmdW5jdGlvbiB3ZWJwYWNrQ29udGV4dEtleXMoKSB7XG5cdHJldHVybiBPYmplY3Qua2V5cyhtYXApO1xufTtcbndlYnBhY2tDb250ZXh0LnJlc29sdmUgPSB3ZWJwYWNrQ29udGV4dFJlc29sdmU7XG5tb2R1bGUuZXhwb3J0cyA9IHdlYnBhY2tDb250ZXh0O1xud2VicGFja0NvbnRleHQuaWQgPSA1OTA7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9tZXRhbW9kZWwgXlxcLlxcLy4qXFwuanNvbiRcbi8vIG1vZHVsZSBpZCA9IDU5MFxuLy8gbW9kdWxlIGNodW5rcyA9IDYiLCJtb2R1bGUuZXhwb3J0cyA9IHtcblx0XCJtZXRhbW9kZWxcIjoge1xuXHRcdFwibmFtZVwiOiBcIkRhc2hib2FyZCBRdW90ZSBMaXN0XCIsXG5cdFx0XCJwYWdpbmF0aW9uXCI6IHRydWUsXG5cdFx0XCJzZWFyY2hpbmdcIjogdHJ1ZSxcblx0XHRcInN1bW1hcnlcIjogdHJ1ZSxcblx0XHRcInNlY3Rpb25zXCI6IFtcblx0XHRcdHtcblx0XHRcdFx0XCJ0aXRsZVwiOiBcIlNlYXJjaCBxdW90ZSBsaXN0IGZvcm1cIixcblx0XHRcdFx0XCJwcm9wZXJ0aWVzXCI6IFtcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcImlkXCI6IFwicXVvdGUtbnVtYmVyXCIsXG5cdFx0XHRcdFx0XHRcInR5cGVcIjogXCJ0ZXh0XCIsXG5cdFx0XHRcdFx0XHRcImxhYmVsXCI6IFwiX1FVT1RFX05VTUJFUlwiLFxuXHRcdFx0XHRcdFx0XCJ1aUlucHV0XCI6IHRydWUsXG5cdFx0XHRcdFx0XHRcImNsYXNzXCI6IFwiYm94IGJveC1yZHMtY29sb3IgYm94LW1hcmdpblRCIGV2ZXJlc3RGaWVsZEJveFwiLFxuXHRcdFx0XHRcdFx0XCJhY3Rpb25cIjoge1xuXHRcdFx0XHRcdFx0XHRcImFjdGlvblR5cGVcIjogXCJzZWFyY2hcIixcblx0XHRcdFx0XHRcdFx0XCJyZXNvdXJjZVwiOiBcInF1b3Rlc1wiLFxuXHRcdFx0XHRcdFx0XHRcImNyaXRlcmlhX2lkXCI6IFwicXVvdGUtaWRlbnRpZmllclwiXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcImlkXCI6IFwicXVvdGUtbGlzdFwiLFxuXHRcdFx0XHRcdFx0XCJsYWJlbFwiOiBcIl9RVU9URV9MSVNUXCIsXG5cdFx0XHRcdFx0XHRcImNsYXNzXCI6IFwiYm94IGJveC1yZHMtY29sb3IgYm94LW1hcmdpblRCIGV2ZXJlc3RGaWVsZEJveFwiLFxuXHRcdFx0XHRcdFx0XCJ0eXBlXCI6IFwidGFibGVcIixcblx0XHRcdFx0XHRcdFwiY29sdW1uc1wiOiBbXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcImlkXCI6IFwicXVvdGUtcHJvZHVjdC1pZFwiLFxuXHRcdFx0XHRcdFx0XHRcdFwibGFiZWxfaGVhZGVyXCI6IFwiX1BST0RVQ1RfVFlQRVwiLFxuXHRcdFx0XHRcdFx0XHRcdFwidHlwZVwiOiBcImljb25cIixcblx0XHRcdFx0XHRcdFx0XHRcIndpZHRoXCI6IFwiNSVcIlxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0XCJpZFwiOiBcInF1b3RlLWlkZW50aWZpZXJcIixcblx0XHRcdFx0XHRcdFx0XHRcImxhYmVsX2hlYWRlclwiOiBcIl9OVU1CRVJcIixcblx0XHRcdFx0XHRcdFx0XHRcInR5cGVcIjogXCJsYWJlbFwiLFxuXHRcdFx0XHRcdFx0XHRcdFwiYWxpZ25cIjogXCJsZWZ0XCIsXG5cdFx0XHRcdFx0XHRcdFx0XCJ3aWR0aFwiOiBcIjEwJVwiXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcImlkXCI6IFwicXVvdGUtb3duZXItbmFtZVwiLFxuXHRcdFx0XHRcdFx0XHRcdFwibGFiZWxfaGVhZGVyXCI6IFwiX05BTUVcIixcblx0XHRcdFx0XHRcdFx0XHRcInR5cGVcIjogXCJsYWJlbFwiLFxuXHRcdFx0XHRcdFx0XHRcdFwiYWxpZ25cIjogXCJsZWZ0XCIsXG5cdFx0XHRcdFx0XHRcdFx0XCJ3aWR0aFwiOiBcIjEwJVwiXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcImlkXCI6IFwicXVvdGUtc3RhcnQtZGF0ZVwiLFxuXHRcdFx0XHRcdFx0XHRcdFwibGFiZWxfaGVhZGVyXCI6IFwiX0VmZmVjdGl2ZV9EYXRlXCIsXG5cdFx0XHRcdFx0XHRcdFx0XCJ0eXBlXCI6IFwibGFiZWxcIixcblx0XHRcdFx0XHRcdFx0XHRcImZvcm1hdFwiOiBcImRkL01NL3l5eXlcIixcblx0XHRcdFx0XHRcdFx0XHRcImFsaWduXCI6IFwibGVmdFwiLFxuXHRcdFx0XHRcdFx0XHRcdFwid2lkdGhcIjogXCIxMCVcIlxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0XCJpZFwiOiBcInF1b3RlLWRpc3RyaWJ1dG9yLWlkXCIsXG5cdFx0XHRcdFx0XHRcdFx0XCJsYWJlbF9oZWFkZXJcIjogXCJfRElTVFJJQlVUT1JfSURcIixcblx0XHRcdFx0XHRcdFx0XHRcInR5cGVcIjogXCJsYWJlbFwiLFxuXHRcdFx0XHRcdFx0XHRcdFwiYWxpZ25cIjogXCJsZWZ0XCIsXG5cdFx0XHRcdFx0XHRcdFx0XCJ3aWR0aFwiOiBcIjEwJVwiXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcImlkXCI6IFwicXVvdGVfcmlzazpkaXNwbGF5LWlkXCIsXG5cdFx0XHRcdFx0XHRcdFx0XCJsYWJlbF9oZWFkZXJcIjogXCJfUklTS19EQVRBXCIsXG5cdFx0XHRcdFx0XHRcdFx0XCJ0eXBlXCI6IFwibGFiZWxcIixcblx0XHRcdFx0XHRcdFx0XHRcImFsaWduXCI6IFwibGVmdFwiLFxuXHRcdFx0XHRcdFx0XHRcdFwid2lkdGhcIjogXCIxNSVcIlxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0XCJpZFwiOiBcImFjdGlvbnNcIixcblx0XHRcdFx0XHRcdFx0XHRcInR5cGVcIjogXCJhY3Rpb25zXCIsXG5cdFx0XHRcdFx0XHRcdFx0XCJhbGlnblwiOiBcImxlZnRcIixcblx0XHRcdFx0XHRcdFx0XHRcIndpZHRoXCI6IFwiMTAlXCIsXG5cdFx0XHRcdFx0XHRcdFx0XCJvcHRpb25zXCI6IFtcblx0XHRcdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XCJ2YWx1ZVwiOiBcImVkaXRcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0XCJpY29uXCI6IFwiZmEgZmxhdGljb24tZWRpdFwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcInRpdGxlXCI6IFwiX0VESVRcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0XCJtZXRob2RcIjogXCJkYXNoYm9hcmRUb1F1b3RlXCJcblx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFwidmFsdWVcIjogXCJyZW1vdmVcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0XCJpY29uXCI6IFwiZmEgZmEtdHJhc2gtb1wiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcInRpdGxlXCI6IFwiX0RFTEVURVwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcIm1ldGhvZFwiOiBcImRlbGV0ZVF1b3RlXCJcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRdXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdF1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdF1cblx0XHRcdH1cblx0XHRdXG5cdH1cbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9tZXRhbW9kZWwvZGFzaGJvYXJkLmpzb25cbi8vIG1vZHVsZSBpZCA9IDYyMVxuLy8gbW9kdWxlIGNodW5rcyA9IDYiLCJpbXBvcnQge2Nvbm5lY3R9IGZyb20gJ3JlYWN0LXJlZHV4J1xuaW1wb3J0IFJlYWN0LCB7Q29tcG9uZW50fSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgU2VjdGlvbiBmcm9tICcuL1NlY3Rpb24nO1xuXG5cbmNsYXNzIFBhZ2UgZXh0ZW5kcyBDb21wb25lbnQge1xuXG4gIHJlbmRlcigpe1xuICAgIHZhciB7dGl0bGUsIHZpZXdkYXRhIH0gPSB0aGlzLnByb3BzO1xuXG4gICAgIHZhciByZW5kZXJUaXRsZSA9ICgpID0+IHtcbiAgICAgIGRlYnVnZ2VyO1xuICAgICAgICBpZiAodmlld2RhdGEgIT09IG51bGwgJiYgdmlld2RhdGEudGl0bGUgIT09IG51bGwgJiYgdHlwZW9mIHZpZXdkYXRhLnRpdGxlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgcmV0dXJuIDxkaXYgPiB7XG4gICAgICAgICAgICAgICAgdmlld2RhdGEudGl0bGVcbiAgICAgICAgICAgIH0gPCAvZGl2PjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiA8ZGl2PiBMb2FkaW5nIDwvZGl2PjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciByZW5kZXJTZWN0aW9ucyA9ICgpID0+IHtcbiAgICAgICAgaWYgKHZpZXdkYXRhICYmIHZpZXdkYXRhLnNlY3Rpb25zKSB7XG4gICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgICByZXR1cm4gdmlld2RhdGEuc2VjdGlvbnMubWFwKChzZWN0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDxTZWN0aW9uIGtleSA9IHtzZWN0aW9uLnRpdGxlfSB0aXRsZSA9IHtzZWN0aW9uLnRpdGxlfSBwcm9wZXJ0aWVzID0ge3NlY3Rpb24ucHJvcGVydGllc30vPjtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIDxkaXYgPiAuLi5iZSBwYWNpZW5jZSA8IC9kaXY+XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGFnZS10aXRsZVwiPlxuICAgICAgICA8aDE+IHtyZW5kZXJUaXRsZSgpfSA8L2gxPlxuICAgICAgICAgIHtyZW5kZXJTZWN0aW9ucygpfVxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9XG59XG5cblxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdChzdGF0ZSA9PiBzdGF0ZSkoUGFnZSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9jb21wb25lbnRzL1BhZ2UuanMiLCJpbXBvcnQge2Nvbm5lY3R9IGZyb20gJ3JlYWN0LXJlZHV4J1xuaW1wb3J0IFJlYWN0LCB7Q29tcG9uZW50fSBmcm9tICdyZWFjdCc7XG5cbiBjbGFzcyBQcm9wZXJ0eSBleHRlbmRzIENvbXBvbmVudCB7XG4gIHJlbmRlcigpe1xuICAgIHZhciB7aWQsIHR5cGUsIGxhYmVsLCBhY3Rpb24sIHZhbHVlLCBocmVmfSA9IHRoaXMucHJvcHM7XG5cbiAgdmFyIHJlbmRlcklucHV0QWN0aW9uU2VhcmNoID0gKCkgPT4ge1xuICAgICAgaWYgKGFjdGlvbiAmJiBhY3Rpb24uYWN0aW9uVHlwZSA9PT0gJ3NlYXJjaCcpIHtcbiAgICAgICAgICByZXR1cm4gPGlucHV0IHR5cGU9XCJidXR0b25cIiBjbGFzc05hbWU9XCJidXR0b25cIiB2YWx1ZT1cIlNlYXJjaFwiPjwvaW5wdXQ+XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3dcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic21hbGwtMiBsYXJnZS00IGNvbHVtbnNcIj5cbiAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwibGFiZWxcIiBodG1sRm9yPXtpZH0+e2xhYmVsfTwvbGFiZWw+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic21hbGwtNiBsYXJnZS02IGNvbHVtbnNcIj5cbiAgICAgICAgICAgICAgICA8aW5wdXQgIHR5cGU9e3R5cGV9IGlkPXtpZH0gbmFtZT17aWR9IHJlZj17KGlucHV0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGV4dElucHV0ID0gaW5wdXQ7XG4gICAgICAgICAgICAgICAgfX0gdmFsdWU9e3ZhbHVlfSAvPlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic21hbGwtMiBsYXJnZS0yIGNvbHVtbnNcIj5cbiAgICAgICAgICAgICAgICB7cmVuZGVySW5wdXRBY3Rpb25TZWFyY2goKX1cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDwvZGl2PlxuICAgICk7XG5cblxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3Qoc3RhdGUgPT4gc3RhdGUpKFByb3BlcnR5KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2NvbXBvbmVudHMvUHJvcGVydHkuanMiLCJpbXBvcnQge2Nvbm5lY3R9IGZyb20gJ3JlYWN0LXJlZHV4J1xuaW1wb3J0IFJlYWN0LCB7Q29tcG9uZW50fSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcGVydHkgZnJvbSAnLi9Qcm9wZXJ0eSc7XG5pbXBvcnQgVGFibGVSZXN1bHQgZnJvbSAnLi9UYWJsZVJlc3VsdCc7XG5cbmNsYXNzIFNlY3Rpb24gZXh0ZW5kcyBDb21wb25lbnQge1xuICByZW5kZXIoKXtcblxuICAgIHZhciB7dGl0bGUsIHByb3BlcnRpZXMgfSA9IHRoaXMucHJvcHM7XG5cbiAgICB2YXIgcmVuZGVyUHJvcGVydGllcyA9ICgpID0+IHtcblxuICAgICAgICBpZiAocHJvcGVydGllcykge1xuICAgICAgICAgICAgcmV0dXJuIHByb3BlcnRpZXMubWFwKChwcm9wZXJ0eSkgPT4ge1xuICAgICAgICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHByb3BlcnR5LnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAndGV4dCc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gPFByb3BlcnR5IGtleSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eS5pZFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydHkuaWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydHkudHlwZVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWwgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydHkubGFiZWxcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbiA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eS5hY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnR5LnZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBocmVmID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnR5LmhyZWZcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RhYmxlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiA8VGFibGVSZXN1bHQga2V5ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnR5LmlkXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eS5pZFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eS50eXBlXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eS5sYWJlbFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29scyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eS5jb2xzXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByb3dzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnR5LnJvd3NcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gPGRpdiA+IFByaW50IGFcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQgcHJvcGVydHkgPCAvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIDxkaXYgPiA8IC9kaXY+XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIHZhciBfdGl0bGUgPSAnJztcbiAgICBpZiAodGl0bGUpIHtcbiAgICAgICAgX3RpdGxlID0gdGl0bGU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgX3RpdGxlID0gJ0RlZmF1bHQgdGl0bGUnO1xuICAgIH1cblxuXG4gICAgcmV0dXJuIChcbiAgICAgICA8ZGl2PlxuICAgICAgICAgIDxoMj57X3RpdGxlfTwvaDI+XG4gICAgICAgICB7cmVuZGVyUHJvcGVydGllcygpfVxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNlY3Rpb247XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJpbXBvcnQge2Nvbm5lY3R9IGZyb20gJ3JlYWN0LXJlZHV4J1xuaW1wb3J0IFJlYWN0LCB7Q29tcG9uZW50fSBmcm9tICdyZWFjdCc7XG5cbmNsYXNzIFRhYmxlUmVzdWx0IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgcmVuZGVyKCkge1xuICB2YXIge2lkLCB0eXBlLCBsYWJlbCwgY29scywgcm93c30gPSB0aGlzLnByb3BzO1xuXG4gIHZhciByZW5kZXJDb2xzID0gY29scy5tYXAoKGN1cnJlbnRjb2wpID0+IHtcbiAgICAgICAgICAgICAgcmV0dXJuIDx0aD57Y3VycmVudGNvbH08L3RoPjtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHZhciBjb3VudCA9IDA7XG5cbiAgICAgICAgICB2YXIgcmVuZGVyUm93cyA9IHJvd3MubWFwKChjdXJyZW50Um93KSA9PiB7XG5cbiAgICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IFtdO1xuICAgICAgICAgICAgICB2YXIgcm93ID0gW107XG4gICAgICAgICAgICAgIGZvciAodmFyIGN1cnJlbnRDb2x1bW4gaW4gY29scykge1xuICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRDb2x1bW4gPT0gJzYnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgcm93LnB1c2goXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjb3VudH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICByb3cucHVzaChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPntjdXJyZW50Um93W2NvbHNbY3VycmVudENvbHVtbl1dfTwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNvbnRhaW5lci5wdXNoKFxuICAgICAgICAgICAgICAgICAgPHRyPntyb3d9PC90cj5cbiAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICBjb3VudCsrO1xuXG4gICAgICAgICAgICAgIHJldHVybiBjb250YWluZXI7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8dGFibGU+XG4gICAgICAgICAgICAgICAgICA8dGhlYWQ+XG4gICAgICAgICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7cmVuZGVyQ29sc31cbiAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgPC90aGVhZD5cbiAgICAgICAgICAgICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAgICAgICAgICAgICB7cmVuZGVyUm93c31cbiAgICAgICAgICAgICAgICAgIDwvdGJvZHk+XG4gICAgICAgICAgICAgIDwvdGFibGU+XG4gICAgICAgICAgKTtcbiAgICAgICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBUYWJsZVJlc3VsdDtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2NvbXBvbmVudHMvVGFibGVSZXN1bHQuanMiLCJleHBvcnQgY29uc3QgRU5EUE9JTlRfVVJMID0gJ2h0dHA6Ly9pbnRlZ3JhbC1ldmVyZXN0LTcyNDcyMjA1MC5hcC1zb3V0aGVhc3QtMi5lbGIuYW1hem9uYXdzLmNvbS9ERVYxLVRFU1QvcnVudGltZS13ZWIvb21uaS9zZXJ2aWNlLyc7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9jb25zdGFudHMvY29uc3RhbnRzLmpzIiwiXG5pbXBvcnQgeyBjcmVhdGVTdG9yZSwgYXBwbHlNaWRkbGV3YXJlLCBjb21wb3NlIH0gZnJvbSAncmVkdXgnXG5pbXBvcnQgeyBjb21wb3NlV2l0aERldlRvb2xzIH0gZnJvbSAncmVtb3RlLXJlZHV4LWRldnRvb2xzJztcbmltcG9ydCByZXNvdXJjZUZhY3RvcnkgZnJvbSAnLi91dGlscy9yZXNvdXJjZUZhY3RvcnknO1xuaW1wb3J0IHRodW5rTWlkZGxld2FyZSBmcm9tICdyZWR1eC10aHVuaydcbmltcG9ydCB0cmFuc2Zvcm0gZnJvbSAnLi91dGlscy90cmFuc2Zvcm0nO1xuXG5cbmNvbnN0IGluaXRpYWxTdGF0ZSA9IHtcbiAgICBtZXRhZGF0YTogbnVsbCxcbiAgICB2aWV3ZGF0YTogbnVsbCxcbiAgICBwcm9wZXJ0aWVzOiBudWxsLFxuICAgIGxvYWRpbmc6IGZhbHNlLFxuICAgIHNjcmVlbklkOiAnJyxcbiAgICBlcnJvck1lc3NhZ2U6ICcnXG59O1xuXG5leHBvcnQgY29uc3QgcmVkdWNlciA9IChzdGF0ZSA9IGluaXRpYWxTdGF0ZSwgYWN0aW9uKSA9PiB7XG4gIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICBjYXNlICdJTklUJzoge1xuICAgICAgY29uc29sZS5sb2coJ2FjY2VzcyB0byBpbml0IGFuZCBhY3Rpb24gdG8gbG9hZCBtZXRhbW9kZWwgaWYgZXhpc3QnKTtcbiAgICAgIHZhciBzY3JlZW5Kc29uTW9kZWwgPSByZXF1aXJlKCcuL21ldGFtb2RlbC8nICsgYWN0aW9uLnNjcmVlbklkICsgJy5qc29uJyk7XG4gICAgICByZXR1cm4gey4uLnN0YXRlLCBzY3JlZW5JZDogJ2Rhc2hib2FyZCcsIGxvYWRpbmc6IHRydWUsIG1ldGFkYXRhOiBzY3JlZW5Kc29uTW9kZWx9O1xuICAgIH1cbiAgICBjYXNlICdMT0FEX1BST1BFUlRJRVNfRlJPTV9SRVNPVVJDRSc6e1xuICAgICAgY29uc29sZS5sb2coJ0xvYWRpbmcgcHJvcGVydGllcyBmcm9tIEFQSScpO1xuICAgICAgcmV0dXJuIHsuLi5zdGF0ZSwgcHJvcGVydGllczogYWN0aW9uLnJlc3BvbnNlfTtcbiAgICB9XG4gICAgY2FzZSAnVFJBTlNGT1JNX0RBVEFfVklFVyc6e1xuICAgICAgY29uc29sZS5sb2coJ1RyYW5zZm9ybWluZyBkYXRhJyk7XG4gICAgICBsZXQgdHJhbnNmb3JtZWREYXRhO1xuICAgICAgaWYgKHN0YXRlLm1ldGFkYXRhICYmIHN0YXRlLnByb3BlcnRpZXMpIHtcbiAgICAgICAgICByZXR1cm4gey4uLnN0YXRlLCB2aWV3ZGF0YTogdHJhbnNmb3JtKHN0YXRlLm1ldGFkYXRhLCBzdGF0ZS5wcm9wZXJ0aWVzKX07XG4gICAgICB9XG4gICAgICByZXR1cm4geyAuLi4gc3RhdGUsIHZpZXdkYXRhOiB0cmFuc2Zvcm1lZERhdGF9O1xuICAgIH1cbiAgICBkZWZhdWx0OiByZXR1cm4gc3RhdGVcbiAgfVxufVxuXG5jb25zdCBjb21wb3NlRW5oYW5jZXJzID0gY29tcG9zZVdpdGhEZXZUb29scyh7IHJlYWx0aW1lOiB0cnVlLCBwb3J0OiA4MDgwIH0pO1xuXG5leHBvcnQgY29uc3QgaW5pdFN0b3JlID0gKGluaXRpYWxTdGF0ZSkgPT4ge1xuICByZXR1cm4gY3JlYXRlU3RvcmUocmVkdWNlciwgaW5pdGlhbFN0YXRlLCBjb21wb3NlRW5oYW5jZXJzKFxuICAgIGFwcGx5TWlkZGxld2FyZSh0aHVua01pZGRsZXdhcmUpXG4gICkpXG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIHN0YXJ0UGFnZShzY3JlZW5JZCxyZXNvdXJjZU5hbWUsIHVybCl7XG4gIHJldHVybiAoZGlzcGF0Y2gpID0+IHtcbiAgICBjb25zb2xlLmxvZygnU3RhcnRpbmcgcGFnZScpO1xuICAgIGRpc3BhdGNoKGluaXRQYWdlKHNjcmVlbklkKSk7XG4gICAgaWYgKHVybCl7XG4gICAgICBkZWJ1Z2dlcjtcbiAgICAgIHJlc291cmNlRmFjdG9yeS5nZXRSZXNwb25zZUZyb21VUkwodXJsKS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgZGlzcGF0Y2gobG9hZFByb3BlcnRpZXNGcm9tUmVzb3VyY2UocmVzKSk7XG4gICAgICAgIGRpc3BhdGNoKHRyYW5zZm9ybURhdGFWaWV3KCkpO1xuICAgICAgfSk7XG5cbiAgICB9ZWxzZXtcbiAgICAgIGRlYnVnZ2VyO1xuICAgICAgcmVzb3VyY2VGYWN0b3J5LmdldFJlc3BvbnNlKHJlc291cmNlTmFtZSwge30pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICBkaXNwYXRjaChsb2FkUHJvcGVydGllc0Zyb21SZXNvdXJjZShyZXMpKTtcbiAgICAgICAgZGlzcGF0Y2godHJhbnNmb3JtRGF0YVZpZXcodXJsKSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4qIEFjdGlvbiBmb3IgaW5pdCBzdGF0ZVxuKlxuKiovXG5leHBvcnQgZnVuY3Rpb24gaW5pdFBhZ2Uoc2NyZWVuSWQpe1xuICAgIHJldHVybnsgdHlwZTogJ0lOSVQnLCBzY3JlZW5JZDogc2NyZWVuSWR9O1xufVxuXG4vKipcbiAqIFNldHMgdGhlIGF1dGhlbnRpY2F0aW9uIHN0YXRlIG9mIHRoZSBhcHBsaWNhdGlvblxuICogQHBhcmFtIHtib29sZWFufSBuZXdTdGF0ZSBUcnVlIG1lYW5zIGEgdXNlciBpcyBsb2dnZWQgaW4sIGZhbHNlIG1lYW5zIG5vIHVzZXIgaXMgbG9nZ2VkIGluXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsb2FkUHJvcGVydGllc0Zyb21SZXNvdXJjZShyZXNwb25zZSkge1xuICByZXR1cm4geyB0eXBlOiAnTE9BRF9QUk9QRVJUSUVTX0ZST01fUkVTT1VSQ0UnLCByZXNwb25zZSB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtRGF0YVZpZXcodXJsKSB7XG4gIHJldHVybiB7IHR5cGU6ICdUUkFOU0ZPUk1fREFUQV9WSUVXJywgdXJsIH07XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zdG9yZS5qcyIsImltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XHJcbmltcG9ydCB7IEVORFBPSU5UX1VSTCB9IGZyb20gJy4uL2NvbnN0YW50cy9jb25zdGFudHMnO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcblxyXG4gIGdldFJlc3BvbnNlOiBmdW5jdGlvbihyZXNvdXJjZSxjcml0ZXJpYSl7XHJcbiAgICBpZiAodHlwZW9mIGNyaXRlcmlhICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgY3JpdGVyaWEucGFyYW0gIT09ICd1bmRlZmluZWQnKXtcclxuICAgICAgdmFyIGVuY29kZWRMb2NhdGlvbiA9IGVuY29kZVVSSUNvbXBvbmVudChjcml0ZXJpYS5wYXJhbS52YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHJlcXVlc3RVcmwgPSAgdHlwZW9mIGNyaXRlcmlhICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgY3JpdGVyaWEucGFyYW0gIT09J3VuZGVmaW5lZCcgJiYgY3JpdGVyaWEucGFyYW0udmFsdWUubGVuZ3RoID4gMCA/YCR7RU5EUE9JTlRfVVJMfSR7cmVzb3VyY2V9PyR7Y3JpdGVyaWEucGFyYW0ua2V5fT0ke2VuY29kZWRMb2NhdGlvbn1gOmAke0VORFBPSU5UX1VSTH0ke3Jlc291cmNlfWA7XHJcbiAgICByZXR1cm4gYXhpb3MuZ2V0KHJlcXVlc3RVcmwpLnRoZW4oZnVuY3Rpb24gKHJlcyl7XHJcbiAgICAgIGlmIChyZXMuZGF0YS5fbGlua3MgJiYgcmVzLmRhdGEuX2xpbmtzLml0ZW0pe1xyXG4gICAgICAgIHJldHVybiByZXMuZGF0YS5fbGlua3MuaXRlbTtcclxuICAgICAgfVxyXG4gICAgfSwgZnVuY3Rpb24ocmVzKXtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvciBnZXQgb3BlcmF0aW9uIHRvICcgKyBgJHtFTkRQT0lOVF9VUkx9LyR7cmVzb3VyY2V9YCk7XHJcbiAgICB9KTtcclxuICB9LFxyXG5cclxuICBnZXRSZXNwb25zZUZyb21VUkw6IGZ1bmN0aW9uKHVybCwgcGF5bG9hZCl7XHJcblxyXG4gICAgcmV0dXJuIGF4aW9zLmdldCh1cmwpLnRoZW4oZnVuY3Rpb24gKHJlcyl7XHJcbiAgICAgIGlmIChyZXMuZGF0YSl7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5kYXRhO1xyXG4gICAgICB9XHJcbiAgICB9LCBmdW5jdGlvbihyZXMpe1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yIGdldCBvcGVyYXRpb24gdG8gJyArIHVybCk7XHJcbiAgICB9KTtcclxuICB9LFxyXG5cclxuICBwYXRjaDogZnVuY3Rpb24odXJsLCBwYXlsb2FkKXtcclxuXHJcbiAgICByZXR1cm4gYXhpb3MucGF0Y2godXJsLCBwYXlsb2FkKS50aGVuKGZ1bmN0aW9uIChyZXMpe1xyXG4gICAgICBpZiAocmVzLmRhdGEpe1xyXG4gICAgICAgIHJldHVybiByZXMuZGF0YTtcclxuICAgICAgfVxyXG4gICAgfSwgZnVuY3Rpb24ocmVzKXtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvciBnZXQgb3BlcmF0aW9uIHRvICcgKyB1cmwpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi91dGlscy9yZXNvdXJjZUZhY3RvcnkuanMiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG1ldGFkYXRhLCByZXNwb25zZSkge1xuXG4gICAgdmFyIHZpZXdEYXRhID0ge307XG5cbiAgICBpZiAobWV0YWRhdGEgJiYgcmVzcG9uc2UpIHtcblxuXG4gICAgICAgIHZhciB0aXRsZSA9ICcnO1xuICAgICAgICB2YXIgc2VjdGlvbnMgPSBbXTtcblxuICAgICAgICBpZiAobWV0YWRhdGEubWV0YW1vZGVsKSB7XG4gICAgICAgICAgICB0aXRsZSA9IG1ldGFkYXRhLm1ldGFtb2RlbC5uYW1lO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXRhZGF0YS5tZXRhbW9kZWwuc2VjdGlvbnMubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50U2VjdGlvbiA9IG1ldGFkYXRhLm1ldGFtb2RlbC5zZWN0aW9uc1tpXTtcblxuICAgICAgICAgICAgICAgIHZhciBwcm9wZXJ0aWVzID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBjdXJyZW50U2VjdGlvbi5wcm9wZXJ0aWVzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50UHJvcGVydHkgPSBjdXJyZW50U2VjdGlvbi5wcm9wZXJ0aWVzW2pdO1xuXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoY3VycmVudFByb3BlcnR5LnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RleHQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBjdXJyZW50UHJvcGVydHkuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGN1cnJlbnRQcm9wZXJ0eS50eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogY3VycmVudFByb3BlcnR5LmxhYmVsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzczogY3VycmVudFByb3BlcnR5LmNsYXNzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogY3VycmVudFByb3BlcnR5LnVpSW5wdXQgPyBjdXJyZW50UHJvcGVydHkuaW5pdFZhbHVlIDogZ2V0UHJvcGVydHlWYWx1ZShjdXJyZW50UHJvcGVydHkuaWQsIHJlc3BvbnNlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBjdXJyZW50UHJvcGVydHkuYWN0aW9uID8gY3VycmVudFByb3BlcnR5LmFjdGlvbiA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhyZWY6IHJlc3BvbnNlLl9saW5rcyA/IHJlc3BvbnNlLl9saW5rcy5zZWxmLmhyZWYgOiAnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICd0YWJsZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydGllcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGN1cnJlbnRQcm9wZXJ0eS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogY3VycmVudFByb3BlcnR5LnR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBjdXJyZW50UHJvcGVydHkubGFiZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzOiBjdXJyZW50UHJvcGVydHkuY2xhc3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3M6IGdldFJvd3NWYWx1ZShjdXJyZW50UHJvcGVydHkuY29sdW1ucywgcmVzcG9uc2UpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xzOiBnZXRDb2xzVmFsdWUoY3VycmVudFByb3BlcnR5LmNvbHVtbnMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuXG5cblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHNlY3Rpb25zW2ldID0ge1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogY3VycmVudFNlY3Rpb24udGl0bGUsXG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHByb3BlcnRpZXNcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2aWV3RGF0YSA9IHtcbiAgICAgICAgICAgIHRpdGxlOiB0aXRsZSxcbiAgICAgICAgICAgIHNlY3Rpb25zOiBzZWN0aW9uc1xuICAgICAgICB9O1xuXG4gICAgfVxuICAgIHJldHVybiB2aWV3RGF0YTtcbn07XG5cbnZhciBnZXRQcm9wZXJ0eVZhbHVlID0gZnVuY3Rpb24oaWQsIHByb3BlcnRpZXMpIHtcbiAgICBmb3IgKHZhciBjdXJyZW50SWQgaW4gcHJvcGVydGllcykge1xuICAgICAgICBpZiAoaWQgPT09IGN1cnJlbnRJZCkge1xuICAgICAgICAgICAgcmV0dXJuIHByb3BlcnRpZXNbaWRdO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuXG52YXIgZ2V0UHJvcGVydHlMaW5rID0gZnVuY3Rpb24oaWQsIHByb3BlcnRpZXMpIHtcbiAgICBkZWJ1Z2dlcjtcbiAgICBmb3IgKHZhciBjdXJyZW50SWQgaW4gcHJvcGVydGllcykge1xuICAgICAgICBpZiAoaWQgPT09IGN1cnJlbnRJZCkge1xuICAgICAgICAgICAgcmV0dXJuIHByb3BlcnRpZXNbaWRdLl9saW5rcy5zZWxmLmhyZWY7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5cblxudmFyIGdldFJvd3NWYWx1ZSA9IGZ1bmN0aW9uKGNvbHVtbnMsIHByb3BlcnRpZXMpIHtcbiAgICB2YXIgcm93cyA9IFtdO1xuXG4gICAgcHJvcGVydGllcyA9IEFycmF5LmlzQXJyYXkocHJvcGVydGllcykgPyBwcm9wZXJ0aWVzIDogW3Byb3BlcnRpZXNdO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wZXJ0aWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBpdGVtcyA9IHt9O1xuICAgICAgICBpdGVtcy5ocmVmID0gcHJvcGVydGllc1tpXS5ocmVmO1xuICAgICAgICBmb3IgKHZhciBjdXJyZW50Q29sdW1uIGluIGNvbHVtbnMpIHtcblxuICAgICAgICAgICAgaWYgKGl0ZW1zICE9PSBudWxsICYmIHR5cGVvZiBpdGVtc1tjb2x1bW5zW2N1cnJlbnRDb2x1bW5dLmlkXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBpdGVtc1tjb2x1bW5zW2N1cnJlbnRDb2x1bW5dLmlkXSA9IHByb3BlcnRpZXNbaV0uc3VtbWFyeVtjb2x1bW5zW2N1cnJlbnRDb2x1bW5dLmlkXSB8fCAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByb3dzLnB1c2goaXRlbXMpO1xuICAgIH1cblxuICAgIHJldHVybiByb3dzO1xufVxuXG52YXIgZ2V0Q29sc1ZhbHVlID0gZnVuY3Rpb24oY29sdW1ucykge1xuICAgIHZhciBjb2xzID0gW107XG4gICAgZm9yICh2YXIgY3VycmVudENvbHVtbiBpbiBjb2x1bW5zKSB7XG4gICAgICAgIGNvbHMucHVzaChjb2x1bW5zW2N1cnJlbnRDb2x1bW5dLmlkKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbHM7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi91dGlscy90cmFuc2Zvcm0uanMiXSwic291cmNlUm9vdCI6IiJ9"}